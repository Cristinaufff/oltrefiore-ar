<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>3 Marker + 3 Video con AR.js</title>
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.min.js"></script>
</head>
<body style="margin: 0; overflow: hidden;">
  <a-scene embedded vr-mode-ui="enabled: false" arjs="sourceType: webcam; debugUIEnabled: true;">
    <a-assets>
      <video id="video1" src="video1.mp4" preload="auto" loop muted crossorigin="anonymous"></video>
      <video id="video2" src="video2.mp4" preload="auto" loop muted crossorigin="anonymous"></video>
      <video id="video3" src="video3.mp4" preload="auto" loop muted crossorigin="anonymous"></video>
    </a-assets>

    <a-marker type="pattern" url="marker1/marker1.patt" smooth="true" id="marker1">
      <a-video id="video1-plane" src="#video1" width="1" height="0.56" rotation="-90 0 0"></a-video>
    </a-marker>

    <a-marker type="pattern" url="marker2/marker2.patt" smooth="true" id="marker2">
      <a-video id="video2-plane" src="#video2" width="1" height="0.56" rotation="-90 0 0"></a-video>
    </a-marker>

    <a-marker type="pattern" url="marker3/marker3.patt" smooth="true" id="marker3">
      <a-video id="video3-plane" src="#video3" width="1" height="0.56" rotation="-90 0 0"></a-video>
    </a-marker>

    <a-entity camera></a-entity>

  </a-scene>

  <script>
    // Gestione video playback all'apparizione/scomparsa dei marker
    document.querySelector('#marker1').addEventListener('markerFound', () => {
      document.querySelector('#video1').play();
    });
    document.querySelector('#marker1').addEventListener('markerLost', () => {
      const v = document.querySelector('#video1');
      v.pause();
      v.currentTime = 0;
    });

    document.querySelector('#marker2').addEventListener('markerFound', () => {
      document.querySelector('#video2').play();
    });
    document.querySelector('#marker2').addEventListener('markerLost', () => {
      const v = document.querySelector('#video2');
      v.pause();
      v.currentTime = 0;
    });

    document.querySelector('#marker3').addEventListener('markerFound', () => {
      document.querySelector('#video3').play();
    });
    document.querySelector('#marker3').addEventListener('markerLost', () => {
      const v = document.querySelector('#video3');
      v.pause();
      v.currentTime = 0;
    });
  </script>
</body>
</html>
